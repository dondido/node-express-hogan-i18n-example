!function(a,b){var c,d,e,f,g=a(b),h=function(){var d;c=a("#map-canvas"),f=a("#map-directions"),"google"in window?loadMap():(d=b.createElement("script"),d.type="text/javascript",d.src="https://maps.googleapis.com/maps/api/js?v=3.exp&callback=loadMap",b.body.appendChild(d)),g.on("click","#route-btn",k).one("dataPageRefresh",i)},i=function(){g.off("click","#route-btn",k)},j=function(a){var b,c=new google.maps.DirectionsService,g=new google.maps.DirectionsRenderer;a=a||{coords:!1,address:"Albena, Bulgaria"},b={origin:a.coords?new google.maps.LatLng(a.lat,a.lng):a.address,destination:e.center,travelMode:google.maps.DirectionsTravelMode.DRIVING},g.setMap(d),g.setPanel(f[0]),c.route(b,function(a,b){b===google.maps.DirectionsStatus.OK&&g.setDirections(a)})},k=function(){var b=a(this);f.is(":empty")?(b.text(b.data("states")[1]),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){j({coords:!0,lat:a.coords.latitude,lng:a.coords.longitude})},j):j()):(b.text(b.data("states")[0]),loadMap())};window.loadMap=function(){var a,b;e={zoom:14,center:new google.maps.LatLng(43.382995,28.098228),mapTypeId:google.maps.MapTypeId.ROADMAP},d=new google.maps.Map(c[0],e),a=new google.maps.Marker({map:d,position:d.getCenter()}),b=new google.maps.InfoWindow({content:c.data("pin-label")}),b.open(d,a)},"complete"===b.readyState?h():g.one("ready",h)}(jQuery,document);